function checkAddIndexOf(){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(elt){var len=this.length>>>0,from=Number(arguments[1])||0;for(from=0>from?Math.ceil(from):Math.floor(from),0>from&&(from+=len);len>from;from++)if(from in this&&this[from]===elt)return from;return-1})}function loadCssFromUrl(url){"use strict";var link=document.createElement("link");link.type="text/css",link.rel="stylesheet",link.href=url,document.getElementsByTagName("head")[0].appendChild(link)}function loadScriptFromUrl(url){"use strict";var result=$.Deferred(),script=document.createElement("script");return script.async="async",script.type="text/javascript",script.src=url,script.onload=script.onreadystatechange=function(_,isAbort){(!script.readyState||/loaded|complete/.test(script.readyState))&&(isAbort?result.reject():result.resolve())},script.onerror=function(){result.reject()},document.getElementsByTagName("head")[0].appendChild(script),result.promise()}function addExceptionHandler(){"use strict";app.provider("$exceptionHandler",function(){this.$get=["common.errorLogService",function(errorLogService){return errorLogService}]})}window.name="NG_DEFER_BOOTSTRAP!";var app=angular.module("webcert",["ui.bootstrap","ui.router","ngCookies","ngSanitize","common","ngAnimate","smoothScroll"]);app.config(["$httpProvider","common.http403ResponseInterceptorProvider",function($httpProvider,http403ResponseInterceptorProvider){"use strict";$httpProvider.interceptors.push("common.httpRequestInterceptorCacheBuster"),http403ResponseInterceptorProvider.setRedirectUrl("/error.jsp"),$httpProvider.responseInterceptors.push("common.http403ResponseInterceptor")}]),app.config(["$provide",function($provide){"use strict";$provide.decorator("ngModelDirective",["$delegate",function($delegate){var ngModel=$delegate[0],controller=ngModel.controller;return ngModel.controller=["$scope","$element","$attrs","$injector",function(scope,element,attrs,$injector){var $interpolate=$injector.get("$interpolate");attrs.$set("name",$interpolate(attrs.name||"")(scope)),$injector.invoke(controller,this,{$scope:scope,$element:element,$attrs:attrs})}],$delegate}]),$provide.decorator("formDirective",["$delegate",function($delegate){var form=$delegate[0],controller=form.controller;return form.controller=["$scope","$element","$attrs","$injector",function(scope,element,attrs,$injector){var $interpolate=$injector.get("$interpolate");attrs.$set("name",$interpolate(attrs.name||attrs.ngForm||"")(scope)),$injector.invoke(controller,this,{$scope:scope,$element:element,$attrs:attrs})}],$delegate}])}]),app.constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:1,yearRange:20,minDate:null,maxDate:null}),app.constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Idag",clearText:"Rensa",closeText:"OK",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}),app.run(["$log","$rootScope","$window","common.messageService","common.UserModel",function($log,$rootScope,$window,messageService,UserModel){"use strict";$rootScope.lang="sv",$rootScope.DEFAULT_LANG="sv",UserModel.setUserContext(MODULE_CONFIG.USERCONTEXT),messageService.addResources(wcMessages),$window.animations=0,$window.doneLoading=!1,$window.dialogDoneLoading=!0,$window.rendered=!0,$rootScope.$on("$stateChangeStart",function(){$window.doneLoading=!1}),$rootScope.$on("$stateNotFound",function(){}),$rootScope.$on("$stateChangeSuccess",function(){$window.doneLoading=!0}),$rootScope.$on("$stateChangeError",function(event,toState){$log.log("$stateChangeError"),$log.log(toState)})}]),$.get("/api/modules/map").then(function(modules){"use strict";var modulesIds=[],modulePromises=[];"true"===MODULE_CONFIG.USE_MINIFIED_JAVASCRIPT?modulePromises.push(loadScriptFromUrl("/web/webjars/common/webcert/js/module.min.js?"+MODULE_CONFIG.BUILD_NUMBER)):(modulePromises.push(loadScriptFromUrl("/web/webjars/common/webcert/js/module.js")),modulePromises.push($.get("/web/webjars/common/webcert/js/module-deps.json")),modulePromises.push($.get("/app-deps.json")),$.ajaxSetup({cache:!0})),angular.forEach(modules,function(module){modulesIds.push(module.id),loadCssFromUrl(module.cssPath+"?"+MODULE_CONFIG.BUILD_NUMBER),"true"===MODULE_CONFIG.USE_MINIFIED_JAVASCRIPT?modulePromises.push(loadScriptFromUrl(module.scriptPath+".min.js?"+MODULE_CONFIG.BUILD_NUMBER)):(modulePromises.push(loadScriptFromUrl(module.scriptPath+".js")),modulePromises.push($.get(module.dependencyDefinitionPath)))}),$.when.apply(this,modulePromises).then(function(){var dependencyPromises=[];"false"===MODULE_CONFIG.USE_MINIFIED_JAVASCRIPT&&angular.forEach(arguments,function(data){void 0!==data&&data[0]instanceof Array&&angular.forEach(data[0],function(depdendency){dependencyPromises.push(loadScriptFromUrl(depdendency))})}),$.when.apply(this,dependencyPromises).then(function(){angular.element().ready(function(){MODULE_CONFIG.USERCONTEXT&&MODULE_CONFIG.USERCONTEXT.aktivaFunktioner&&MODULE_CONFIG.USERCONTEXT.aktivaFunktioner.indexOf("jsLoggning")>=0&&addExceptionHandler(),angular.resumeBootstrap([app.name,"common"].concat(Array.prototype.slice.call(modulesIds,0)))})}).fail(function(error){window.console&&console.log(error)})}).fail(function(error){window.console&&console.log(error)})});