Testar att felmeddelande när man fyller i fält i intyget visas som de ska. Skrevs för WEBCERT-1386.

!3 Logga in

| skript | !-LoggaIn-! |
| logga in som | IFV1239877878-104B_IFV1239877878-1042 |

!3 Skapa ett nytt intygsutkast

| skript | !-SkrivIntyg-! |
| skapa nytt intygsutkast for patient | ${person1.personnummer} | av typ | FK7263 |
| $intygsid= | intygsid |

!3 Testa valideringsfel

Felaktigt datumform ska ge valideringsfel för det fältet men inga andra valideringsfel ska visas.
| Populera Fk7263 |
| undersokningDatum |
| felaktigt |

| skript | !-SkrivIntyg-! |
| säkerställ att | meddelande intyget ej komplett visas |
| säkerställ att | valideringsfel intyg baserat pa visas |

!3 Med korrekt datum ska detta valideringsfel försvinna

| Populera Fk7263 |
| undersokningDatum |
| 2014-09-17 |

| skript | !-SkrivIntyg-! |
| säkerställ att | meddelande intyget ej komplett visas |
| säkerställ att | inga valideringsfel visas |

!3 Om man valt "Visa vad som saknas" på ett tomt intyg ska alla valideringsfel för obligatoriska fält visas

| Populera Fk7263 |
| undersokningDatum |
| <empty> |

| skript | !-SkrivIntyg-! |
| visa vad som saknas  |
| säkerställ att | meddelande intyget ej komplett visas |

Kontrollera valideringsmeddelanden.

| Skriv Intyg |
| valideringsfel intyg baserat pa visas? | valideringsfel diagnos visas? | valideringsfel funktionsnedsattning visas? | valideringsfel aktivitetsbegransning visas? | valideringsfel sysselsattning visas? | valideringsfel arbetsformaga visas? | valideringsfel prognos visas? | valideringsfel rekommendationer visas? | valideringsfel vardperson visas? |
| true                                   | true                          | true                                       | true                                        | true                                 | true                                | false                         | false                                  | false                            |


!3 Respektive länk till formulärdel med fel skall trigga scrollning till avsett avsnitt vid klick (webcert-1751/1752)

| skript | !-SkrivIntyg-! |
| klicka pa fellank | fk7263.label.sysselsattning |

Sidan skall nu ha scrollats till relevant element. Selenium fixar tyvärr inte att verifiera att scroll skett eller att ett visst element är "in viewport" så vi får nöja oss med att länken gick att klicka på.

!3 Om man går tillbaka genom "Dölj vad som saknas" på ett tomt intyg ska dessa försvinna igen.

| skript | !-SkrivIntyg-! |
| dolj vad som saknas |
| säkerställ att | meddelande intyget ej komplett visas |

Kontrollera valideringsmeddelanden.

| Skriv Intyg |
| valideringsfel intyg baserat pa visas? | valideringsfel diagnos visas? | valideringsfel funktionsnedsattning visas? | valideringsfel aktivitetsbegransning visas? | valideringsfel sysselsattning visas? | valideringsfel arbetsformaga visas? | valideringsfel prognos visas? | valideringsfel rekommendationer visas? | valideringsfel vardperson visas? |
| false                                  | false                         | false                                      | false                                       | false                                | false                               | false                         | false                                  | false                            |

| skript | !-SkrivIntyg-! |
| visa vad som saknas |

!3 Fyll i diagnos och arbetsförmåga

| Populera Fk7263 |
| diagnos1 | nedsattMed100 |
| a00 | true |

| skript | !-SkrivIntyg-! |
| säkerställ att | meddelande intyget ej komplett visas |

Kontrollera valideringsmeddelanden.

| Skriv Intyg |
| valideringsfel intyg baserat pa visas? | valideringsfel diagnos visas? | valideringsfel funktionsnedsattning visas? | valideringsfel aktivitetsbegransning visas? | valideringsfel sysselsattning visas? | valideringsfel arbetsformaga visas? | valideringsfel prognos visas? | valideringsfel rekommendationer visas? | valideringsfel vardperson visas? |
| true                                   | false                         | true                                       | true                                        | true                                 | false                               | false                         | false                                  | false                            |

!3 Fyll blanktecken i sysselsättning, funktionsnedsattning och aktivitetsbegransning

| Populera Fk7263 |
| nuvarandearbete | arbetsuppgifter | funktionsnedsattning | aktivitetsbegransning |
| true            | <space>         | <space>              | <space>               |

| skript | !-SkrivIntyg-! |
| säkerställ att | meddelande intyget ej komplett visas |

Kontrollera valideringsmeddelanden.

| Skriv Intyg |
| valideringsfel intyg baserat pa visas? | valideringsfel diagnos visas? | valideringsfel funktionsnedsattning visas? | valideringsfel aktivitetsbegransning visas? | valideringsfel sysselsattning visas? | valideringsfel arbetsformaga visas? | valideringsfel prognos visas? | valideringsfel rekommendationer visas? | valideringsfel vardperson visas? |
| true                                   | false                         | true                                       | true                                        | true                                 | false                               | false                         | false                                  | false                            |

!3 Fyll i resten av intyget korrekt

| Populera Fk7263 |
| undersokningDatum |
| 2014-09-17 |

| Populera Fk7263 |
| arbetsuppgifter |
| arbetsuppgifter1 |

| Populera Fk7263 |
| aktivitetsbegransning |
| aktivitetsbegransning1 |

| Populera Fk7263 |
| funktionsnedsattning |
| funktionsnedsattning1 |

Inga valideringsfel ska vara kvar

| Skriv Intyg |
| valideringsfel intyg baserat pa visas? | valideringsfel diagnos visas? | valideringsfel funktionsnedsattning visas? | valideringsfel aktivitetsbegransning visas? | valideringsfel sysselsattning visas? | valideringsfel arbetsformaga visas? | valideringsfel prognos visas? | valideringsfel rekommendationer visas? | valideringsfel vardperson visas? |
| false                                  | false                         | false                                      | false                                       | false                                | false                               | false                         | false                                  | false                            |

| skript | !-SkrivIntyg-! |
| säkerställ att | meddelande intyget komplett visas |

| ta bort utkast |
| utkastId |
| $intygsid |
